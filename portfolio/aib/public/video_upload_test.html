<html>
<head>
  <title>Video Upload Test</title>
  <script type="text/javascript">
    function handleUpload() {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/api/upload', true);
      xhr.onload = function(e) {
      };

      // Listen to the upload progress.
      var progressBar = document.querySelector('progress');
      xhr.upload.onprogress = function(e) {
        if (e.lengthComputable) {
          progressBar.value = (e.loaded / e.total) * 100;
          progressBar.textContent = progressBar.value; // Fallback for unsupported browsers.
        }
      };

      var fd = new FormData();
      fd.append('videoFile', document.getElementById('input').files[0]);

      xhr.send(fd);
    }
    function onload() {
      document.getElementById('input').addEventListener('change', handleUpload, false);
    }

  </script>
</head>
<body onload="onload()">

<input type="file" id="input" />
<progress min="0" max="100" value="0">0% complete</progress>
</body>
</html>