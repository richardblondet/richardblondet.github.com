function module_twitter(e,t){var n=this;this.tabActive=!1,this.obj=e,this.num=t,this.tweets,this.bp,this.bn,this.tweetsloaded=!1,this.currentTweet=0,this.twitterTweets,this.follow="https://twitter.com/"+this.obj.id,Enabler.addEventListener(studio.events.StudioEvent.EXIT,function(e){n.tabActive&&n.toggle(0)})}preloadScripts.push("style_twitter.css"),preloadScripts.push("helper_autolinker.js"),module_twitter.prototype.createModule=function(){var e=this,t=document.getElementById("subcontainer"),n=document.createElement("div");n.id="module_"+this.num,n.style.border="1px solid "+config.global.border,n.className="rel btn mod mod_small border";var a=document.createElement("div");a.className="wrapper rel animate peek";var i=document.createElement("img");i.className="poster abs",i.src=getURL(this.obj.bg.small);var s=document.createElement("div");s.className="cta_regular abs";var l=document.createElement("span");l.className="rel mod_name",l.innerHTML=this.obj.mod_name,s.appendChild(l),a.appendChild(i),a.appendChild(s),n.appendChild(a),t.appendChild(n),this.obj.active||modulePeek.push(a),n.onclick=function(t){e.toggle(1)}},module_twitter.prototype.createTab=function(){var e=this,t=document.getElementById("subcontainer"),n=document.createElement("div");n.id="tab_"+this.num,n.className="abs animate tab tab_"+this.obj.tab_class;var a=document.createElement("div");a.className="abs animate content";var i=document.createElement("div");i.className="wrapper abs",this.tweets=document.createElement("div"),this.tweets.className="tweets abs animate",this.tweets.id="tweets_"+this.num,this.bn=document.createElement("div"),this.bn.className="btn_next btn abs prevnext animate",this.bn.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12" height="32" viewBox="0 0 12 32"><path fill="#444444" d="M0.002 4.008l11.992 11.992-11.992 11.992v-23.984z"></path></svg>',this.bn.style.color=this.obj.btn_color,this.bn.onclick=function(){e.currentTweet<e.twitterTweets.length-1&&e.slideTweet(1)},this.bp=document.createElement("div"),this.bp.className="btn_prev btn abs prevnext animate",this.bp.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12" height="32" viewBox="0 0 12 32"><path fill="#444444" d="M0 15.996l11.992 11.992v-23.984l-11.992 11.992z"></path></svg>',this.bp.style.color=this.obj.btn_color,this.bp.onclick=function(){e.currentTweet>0&&e.slideTweet(0)};var s=document.createElement("img");s.className="abs btn twitter_icon",s.src=getURL(this.obj.bg.icon),s.onclick=function(){Enabler.exitOverride("Twitter: Follow",e.follow)};var l=document.createElement("div");l.className="abs btn close_tab",l.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 24 24"><path fill="#444444" d="M12 20.016q3.281 0 5.648-2.367t2.367-5.648-2.367-5.648-5.648-2.367-5.648 2.367-2.367 5.648 2.367 5.648 5.648 2.367zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93zM14.578 8.016l1.406 1.406-2.578 2.578 2.578 2.578-1.406 1.406-2.578-2.578-2.578 2.578-1.406-1.406 2.578-2.578-2.578-2.578 1.406-1.406 2.578 2.578z"></path></svg>',l.getElementsByTagName("path")[0].style.fill=config.global.tab.close_color;var r=document.createElement("div");r.className="tab_header abs btn",i.appendChild(this.tweets),a.appendChild(i),n.appendChild(this.bn),n.appendChild(this.bp),n.appendChild(a),n.appendChild(s),n.appendChild(r),n.appendChild(l),t.appendChild(n),r.onclick=function(e){Enabler.exitOverride("Header",config.global.header.exit)},l.onclick=function(t){e.toggle(0)}},module_twitter.prototype.toggle=function(e){var t=this;if(e){if(this.tweetsloaded)addClass(document.getElementById("tab_"+this.num),"active");else{toggleSpinner(1);var n=document.createElement("script");n.type="text/javascript",n.src=this.obj.feed+"?callback=module_"+t.num+".loadTweets",document.getElementsByTagName("head")[0].appendChild(n)}Enabler.counter("Open Twitter Module",!0),this.tabActive=!0,EventBus.dispatch("KILL_SLIDESHOW",window)}else removeClass(document.getElementById("tab_"+this.num),"active"),Enabler.counter("Close Twitter Module",!0),this.tabActive=!1},module_twitter.prototype.loadTweets=function(e){trace("tweets loaded"),this.twitterTweets=e;for(var t=0;t<e.length;t++){var n=document.createElement("div");n.className="tweet rel abs",n.id="tweet_"+t;var a=document.createElement("a");a.href="https://twitter.com/"+this.obj.id,a.className="icon abs";var i=document.createElement("img");i.className="image tw_link",i.src=getURL(e[t].user.profile_image_url_https);var s=document.createElement("div");s.className="content rel";var l=document.createElement("span");l.className="name lato",l.innerHTML=e[t].user.name;var r=document.createElement("span");r.className="handle lato",r.innerHTML=Autolinker.link(this.obj.handle,{className:"twh"});var o=document.createElement("span");o.className="date lato",o.innerHTML=e[t].created_at;var c=document.createElement("div");c.className="text lato",c.innerHTML=Autolinker.link(e[t].text,{className:"twc"}),s.appendChild(l),s.appendChild(r),s.appendChild(o),s.appendChild(c),a.appendChild(i),n.appendChild(a),n.appendChild(s),this.tweets.appendChild(n)}[].forEach.call(document.getElementsByClassName("twc"),function(e){e.onclick=function(){Enabler.exitOverride("Twitter Hyperlink",e.href)}}),[].forEach.call(document.getElementsByClassName("twh"),function(e){e.onclick=function(){Enabler.exitOverride("Twitter Hyperlink",e.href)}}),[].forEach.call(document.getElementsByClassName("tw_link"),function(e){e.onclick=function(){Enabler.exitOverride("Twitter Hyperlink",e.href)}}),this.toggle(1),this.tweetsloaded=!0,toggleSpinner(0)},module_twitter.prototype.slideTweet=function(e){var t=this;if(trace("active: "+activeButtons+" /  slide: "+e),activeButtons){addClass(this.bp,"disabled"),addClass(this.bn,"disabled"),activeButtons=!1;var n=this.tweets,a=document.getElementById("tweet_"+this.currentTweet),i,s=document.getElementById("tweet_0").offsetLeft-document.getElementById("tweet_1").offsetLeft,l,r;e?(Enabler.counter("Twitter: Next Tweet",!0),r=this.currentTweet-1,this.currentTweet+=1,i=document.getElementById("tweet_"+r),l=n.offsetLeft,l+=s):(Enabler.counter("Twitter: Previous Tweet",!0),r=this.currentTweet+1,this.currentTweet-=1,i=document.getElementById("tweet_"+r),l=n.offsetLeft,l-=s),n.style.left=l,setTimeout(function(){t.currentTweet>0&&removeClass(t.bp,"disabled"),t.currentTweet<t.twitterTweets.length-1&&removeClass(t.bn,"disabled"),activeButtons=!0},500)}};